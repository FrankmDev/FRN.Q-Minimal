---
const contactMethods = [
  {
    icon: "✉",
    label: "Email Directo",
    value: "hola@frnq.es",
    href: "mailto:hola@frnq.es",
  },
  { 
    icon: "☕", 
    label: "Call Estratégica", 
    value: "Agendar 30 min", 
    href: "#form" 
  },
  {
    icon: "✎",
    label: "Briefing Online",
    value: "Comenzar ahora",
    href: "#form",
  },
];

const faqItems = [
  {
    q: "¿Cuál es la inversión para una infraestructura digital de estas características?",
    a: "Partimos desde 3.000€ para activos de alto impacto (landing pages que convierten), hasta 15.000€+ para infraestructuras e-commerce empresariales complejas. No estás comprando una web: estás adquiriendo un activo depreciable que elimina costes de mantenimiento y genera ROI desde el mes uno. A 3 años, la diferencia entre esto y una plantilla es de decenas de miles de euros ahorrados.",
  },
  {
    q: "¿Por qué invertir en código puro cuando WordPress cuesta menos inicialmente?",
    a: "WordPress es como alquilar un coche viejo: barato el primer mes, pero suma reparaciones, mantenimiento y averías. Las plantillas penalizan tu SEO, necesitan plugins que se rompen, y cada actualización es una ruleta rusa. Nuestra infraestructura es como comprar el coche nuevo: inversión única, cero mantenimiento crítico, y velocidad que Google premia. A medio plazo, siempre es más rentable.",
  },
  {
    q: "¿Cómo garantizan que mi nueva infraestructura convertirá más que la actual?",
    a: "Cada decisión está respaldada por datos, no por intuición. Analizamos el comportamiento de tus usuarios actuales, identificamos puntos de fricción, y diseñamos jerarquías visuales que guían hacia la acción. Además, nuestra garantía es concreta: si no superamos tus métricas actuales de velocidad y rendimiento, no pagas el despliegue final.",
  },
  {
    q: "¿Cuánto tiempo tarda desde el diagnóstico hasta el lanzamiento?",
    a: "Una landing de alto impacto: 2-3 semanas. Una web corporativa completa: 6-8 semanas. Una infraestructura B2B compleja: 10-12 semanas. Damos calendarios reales, no promesas imposibles. Durante todo el proceso recibes actualizaciones semanales y acceso a entornos de prueba. La velocidad depende de la complejidad, pero la calidad es innegociable.",
  },
  {
    q: "¿Qué ocurre si necesito evolucionar el activo tras el lanzamiento?",
    a: "Entregas tu infraestructura documentada, con código limpio y arquitectura escalable. Cualquier desarrollador puede trabajar sobre ella. Si prefieres continuar con nosotros, ofrecemos sprints de mejora continua sin permanencia ni dependencias técnicas. Tu activo es tuyo: nosotros solo lo construimos para que dure décadas, no meses.",
  },
  {
    q: "¿Trabajan con empresas fuera de España?",
    a: "La mitad de nuestros clientes están en Europa y Latinoamérica. Trabajamos con metodologías async, videollamadas estratégicas y sistemas de revisión colaborativa. La proximidad física es irrelevante cuando hay alineación de objetivos. Lo que importa es que entiendas que tu web es una inversión, no un gasto. Ese mindset no entiende de fronteras.",
  },
];

const formFields = {
  types: [
    { value: "", label: "Selecciona..." },
    { value: "landing", label: "Landing de Alto Impacto" },
    { value: "corporate", label: "Web Corporativa Premium" },
    { value: "ecommerce", label: "E-commerce a Medida" },
    { value: "redesign", label: "Rediseño de Legado" },
    { value: "other", label: "Otro — lo definimos juntos" },
  ],
  budgets: [
    { value: "", label: "Selecciona rango..." },
    { value: "3k-5k", label: "3.000€ – 5.000€" },
    { value: "5k-10k", label: "5.000€ – 10.000€" },
    { value: "10k-20k", label: "10.000€ – 20.000€" },
    { value: "20k+", label: "Más de 20.000€" },
  ],
};
---

<section class="contact" id="contacto" aria-labelledby="contact-title">
  <div class="container">
    <div class="contact-layout">
      <div class="contact-info">
        <div class="info-header">
          <div class="header-label">
            <span class="label-line" aria-hidden="true"></span>
            <span class="label-text">Primer Contacto</span>
          </div>
          <h2 class="info-title" id="contact-title">
            Evaluemos si somos<br />
            <span class="title-accent">el partner adecuado</span>
          </h2>
          <p class="info-desc">
            No trabajamos con todos los proyectos. Solo con quienes entienden
            que una web es una inversión, no un gasto. Si buscas diferenciación
            real, hablemos.
          </p>
        </div>

        <div class="contact-methods" role="list" aria-label="Métodos de contacto">
          {contactMethods.map((method) => (
            <a href={method.href} class="method-card" role="listitem">
              <span class="method-icon" aria-hidden="true">{method.icon}</span>
              <div class="method-info">
                <span class="method-label">{method.label}</span>
                <span class="method-value">{method.value}</span>
              </div>
              <span class="method-arrow" aria-hidden="true">→</span>
            </a>
          ))}
        </div>

        <div class="social-links">
          <span class="social-label">También en:</span>
          <div class="social-icons" role="list" aria-label="Redes sociales">
            <a href="#" class="social-icon" role="listitem" aria-label="LinkedIn">in</a>
            <a href="#" class="social-icon" role="listitem" aria-label="GitHub">gh</a>
            <a href="#" class="social-icon" role="listitem" aria-label="Dribbble">dr</a>
          </div>
        </div>
      </div>

      <div class="contact-form-wrapper" id="form">
        <div class="form-card">
          <div class="form-header">
            <h3 class="form-title">Evaluación de Proyecto</h3>
            <div class="form-status" role="status">
              <span class="status-dot" aria-hidden="true"></span>
              <span class="status-text">Aceptando nuevos</span>
            </div>
          </div>

          <form class="contact-form" action="#" method="POST" aria-label="Formulario de evaluación de proyecto">
            <div class="form-row">
              <div class="form-field">
                <label for="name">Nombre</label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  placeholder="Tu nombre"
                  required
                  autocomplete="name"
                />
              </div>
              <div class="form-field">
                <label for="email">Email</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  placeholder="tu@email.com"
                  required
                  autocomplete="email"
                />
              </div>
            </div>

            <div class="form-field">
              <label for="type">Tipo de Infraestructura</label>
              <select id="type" name="type" required>
                {formFields.types.map(type => (
                  <option value={type.value}>{type.label}</option>
                ))}
              </select>
            </div>

            <div class="form-field">
              <label for="budget">Inversión Prevista</label>
              <select id="budget" name="budget" required>
                {formFields.budgets.map(budget => (
                  <option value={budget.value}>{budget.label}</option>
                ))}
              </select>
            </div>

            <div class="form-field">
              <label for="message">Descripción del Desafío</label>
              <textarea
                id="message"
                name="message"
                rows="4"
                placeholder="¿Qué problema necesitas resolver? ¿Qué resultados esperas?"
                required
              ></textarea>
            </div>

            <button type="submit" class="form-submit">
              <span>Solicitar evaluación estratégica</span>
              <span class="submit-icon" aria-hidden="true">↗</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <div class="faq-section">
      <h3 class="faq-title">Preguntas que importan</h3>
      <div class="faq-list">
        {faqItems.map((item, i) => (
          <div class="faq-item" data-faq-item>
            <button class="faq-question" aria-expanded="false" type="button">
              <span>{item.q}</span>
              <span class="faq-icon" aria-hidden="true">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="faq-arrow">
                  <path d="M3 6L8 11L13 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </button>
            <div class="faq-answer-wrapper">
              <div class="faq-answer-inner">
                <p class="faq-answer">{item.a}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<script>
  // Smooth FAQ accordion
  const faqItems = document.querySelectorAll('[data-faq-item]');
  
  faqItems.forEach(item => {
    const question = item.querySelector('.faq-question');
    
    question?.addEventListener('click', () => {
      const isOpen = item.classList.contains('is-open');
      
      // Close all other items (optional - remove if you want multiple open)
      faqItems.forEach(otherItem => {
        if (otherItem !== item) {
          otherItem.classList.remove('is-open');
          const otherQuestion = otherItem.querySelector('.faq-question');
          otherQuestion?.setAttribute('aria-expanded', 'false');
        }
      });
      
      // Toggle current item
      item.classList.toggle('is-open');
      question?.setAttribute('aria-expanded', String(!isOpen));
    });
  });
</script>

<style>
  .contact {
    padding: var(--space-4xl) 0;
    position: relative;
  }

  .contact::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: repeating-linear-gradient(
      90deg,
      var(--border) 0,
      var(--border) 20px,
      transparent 20px,
      transparent 40px
    );
  }

  .contact-layout {
    display: grid;
    gap: var(--space-3xl);
    margin-bottom: var(--space-4xl);
  }

  @media (min-width: 900px) {
    .contact-layout {
      grid-template-columns: 1fr 1.2fr;
    }
  }

  .info-header {
    margin-bottom: var(--space-2xl);
  }

  .header-label {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
  }

  .label-line {
    width: 60px;
    height: 2px;
    background: var(--border);
  }

  .label-text {
    font-family: var(--font-mono);
    font-size: 0.875rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  .info-title {
    font-size: clamp(1.75rem, 5vw, 3.5rem);
    font-weight: 300;
    line-height: 1.1;
    margin-bottom: var(--space-lg);
  }

  .title-accent {
    font-weight: 800;
    position: relative;
    display: inline-block;
  }

  .title-accent::after {
    content: "";
    position: absolute;
    bottom: 0.1em;
    left: 0;
    right: 0;
    height: 8px;
    background: var(--text);
    opacity: 0.15;
  }

  .info-desc {
    font-size: clamp(1rem, 2vw, 1.125rem);
    line-height: 1.7;
    opacity: 0.7;
    max-width: 400px;
  }

  .contact-methods {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    margin-bottom: var(--space-2xl);
  }

  .method-card {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    padding: var(--space-md) var(--space-lg);
    border: 2px solid var(--border);
    background: var(--bg);
    box-shadow: var(--shadow-brutal);
    transition: 
      transform var(--transition-fast),
      box-shadow var(--transition-fast);
  }

  [data-theme="dark"] .method-card {
    box-shadow: none;
  }

  .method-card:hover {
    transform: translate(-4px, -4px);
    box-shadow: 8px 8px 0 var(--border);
  }
  
  [data-theme="dark"] .method-card:hover {
    box-shadow: var(--shadow-brutal-hover);
  }

  .method-card:hover .method-arrow {
    transform: translateX(4px);
  }
  
  .method-card:focus-visible {
    outline: 3px solid var(--text);
    outline-offset: 3px;
  }

  .method-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  .method-info {
    flex: 1;
  }

  .method-label {
    display: block;
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    opacity: 0.5;
    margin-bottom: 0.25rem;
  }

  .method-value {
    font-weight: 600;
  }

  .method-arrow {
    font-size: 1.25rem;
    transition: transform var(--transition-base);
  }

  .social-links {
    display: flex;
    align-items: center;
    gap: var(--space-lg);
  }

  .social-label {
    font-size: 0.875rem;
    opacity: 0.6;
  }

  .social-icons {
    display: flex;
    gap: var(--space-sm);
  }

  .social-icon {
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid var(--border);
    font-family: var(--font-mono);
    font-size: 0.75rem;
    font-weight: 700;
    transition: 
      background var(--transition-fast),
      color var(--transition-fast),
      transform var(--transition-fast);
  }

  .social-icon:hover {
    background: var(--text);
    color: var(--bg);
    transform: translateY(-2px);
  }
  
  .social-icon:focus-visible {
    outline: 3px solid var(--text);
    outline-offset: 3px;
  }

  .contact-form-wrapper {
    position: relative;
  }

  .form-card {
    border: 2px solid var(--border);
    background: var(--bg);
    box-shadow: var(--shadow-brutal-lg);
  }

  [data-theme="dark"] .form-card {
    box-shadow: 4px 4px 0 rgba(255, 255, 255, 0.08);
  }

  .form-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-lg) var(--space-xl);
    border-bottom: 2px solid var(--border);
    background: var(--bg-alt);
    gap: var(--space-md);
    flex-wrap: wrap;
  }

  .form-title {
    font-size: clamp(1.125rem, 3vw, 1.25rem);
    font-weight: 700;
  }

  .form-status {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: 0.8125rem;
    font-weight: 500;
    flex-shrink: 0;
  }

  .status-dot {
    width: 8px;
    height: 8px;
    background: #22c55e;
    border-radius: 50%;
    animation: pulse 2s infinite;
    flex-shrink: 0;
  }

  .contact-form {
    padding: var(--space-xl);
    display: flex;
    flex-direction: column;
    gap: var(--space-lg);
  }

  .form-row {
    display: grid;
    gap: var(--space-lg);
  }

  @media (min-width: 500px) {
    .form-row {
      grid-template-columns: 1fr 1fr;
    }
  }

  .form-field {
    margin-bottom: 0;
  }

  .form-field label {
    display: block;
    font-size: 0.8125rem;
    font-weight: 600;
    margin-bottom: var(--space-xs);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .form-field input,
  .form-field select,
  .form-field textarea {
    width: 100%;
    padding: 0.875rem var(--space-md);
    font-size: 0.9375rem;
    font-family: inherit;
    border: 2px solid var(--border);
    border-radius: 0;
    background: var(--bg);
    color: var(--text);
    transition: 
      box-shadow var(--transition-fast),
      transform var(--transition-fast);
    -webkit-appearance: none;
    appearance: none;
  }
  
  .form-field input:hover,
  .form-field select:hover,
  .form-field textarea:hover {
    border-color: var(--text);
  }

  .form-field select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='3'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 1rem center;
    padding-right: 2.5rem;
    cursor: pointer;
  }

  [data-theme="dark"] .form-field select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='3'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
  }

  .form-field select option {
    background: var(--bg);
    color: var(--text);
  }

  .form-field input:focus,
  .form-field select:focus,
  .form-field textarea:focus {
    outline: none;
    box-shadow: 4px 4px 0 var(--border);
    transform: translate(-2px, -2px);
  }

  .form-field input::placeholder,
  .form-field textarea::placeholder {
    color: var(--text);
    opacity: 0.4;
  }

  .form-submit {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
    width: 100%;
    padding: var(--space-md);
    font-size: 0.9375rem;
    font-weight: 700;
    background: var(--text);
    color: var(--bg);
    border: 2px solid var(--text);
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.15);
    transition: 
      transform var(--transition-fast),
      box-shadow var(--transition-fast);
    cursor: pointer;
  }

  .form-submit:hover {
    transform: translate(-3px, -3px);
    box-shadow: 7px 7px 0 rgba(0, 0, 0, 0.15);
  }
  
  .form-submit:focus-visible {
    outline: 3px solid var(--text);
    outline-offset: 3px;
  }
  
  /* En modo oscuro, sombra clara para contraste */
  [data-theme="dark"] .form-submit {
    border-color: var(--text);
    box-shadow: 4px 4px 0 rgba(255, 255, 255, 0.12);
  }
  
  [data-theme="dark"] .form-submit:hover {
    box-shadow: 7px 7px 0 rgba(255, 255, 255, 0.12);
  }

  .submit-icon {
    transition: transform var(--transition-base);
  }

  .form-submit:hover .submit-icon {
    transform: translate(4px, -4px);
  }

  .faq-section {
    border-top: 2px solid var(--border);
    padding-top: var(--space-3xl);
  }

  .faq-title {
    font-size: clamp(1.25rem, 3vw, 1.5rem);
    font-weight: 700;
    margin-bottom: var(--space-xl);
  }

  .faq-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
  }

  .faq-item {
    border: 2px solid var(--border);
    background: var(--bg);
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    cursor: none;
    overflow: hidden;
  }

  .faq-item:hover {
    border-color: var(--text);
    transform: translateX(4px);
  }

  .faq-item.is-open {
    background: var(--bg-alt);
  }

  /* Smooth open animation using grid */
  .faq-answer-wrapper {
    display: grid;
    grid-template-rows: 0fr;
    transition: grid-template-rows 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .faq-item.is-open .faq-answer-wrapper {
    grid-template-rows: 1fr;
  }

  .faq-answer-inner {
    overflow: hidden;
  }

  .faq-question {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-md);
    padding: var(--space-md) var(--space-lg);
    font-weight: 600;
    cursor: none;
    text-align: left;
    transition: all 0.3s ease;
    width: 100%;
    background: transparent;
    border: none;
    color: inherit;
    font-family: inherit;
    font-size: inherit;
  }

  .faq-question:hover {
    background: var(--bg-alt);
  }

  .faq-item.is-open .faq-question {
    background: var(--bg-alt);
  }
  
  .faq-question:focus-visible {
    outline: 3px solid var(--text);
    outline-offset: -3px;
  }

  .faq-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    flex-shrink: 0;
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .faq-arrow {
    transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    width: 100%;
    height: 100%;
  }

  .faq-item.is-open .faq-arrow {
    transform: rotate(180deg);
  }

  .faq-answer {
    padding: 0 var(--space-lg) var(--space-lg);
    font-size: 0.9375rem;
    line-height: 1.7;
    opacity: 0;
    cursor: none;
    transform: translateY(-10px);
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3) 0.1s;
    margin: 0;
  }

  .faq-item.is-open .faq-answer {
    transform: translateY(0);
    opacity: 0.85;
  }
  
  /* Responsive */
  @media (max-width: 640px) {
    .contact {
      padding: var(--space-3xl) 0;
    }
    
    .contact-layout {
      gap: var(--space-2xl);
    }
    
    .form-header {
      padding: var(--space-md) var(--space-lg);
    }
    
    .contact-form {
      padding: var(--space-lg);
    }
  }
</style>
